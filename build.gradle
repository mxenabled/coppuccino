plugins {
  id "com.github.mxenabled.hush" version "2.3.1"
  id "com.github.mxenabled.vogue" version "1.0.1"
  id "groovy"
  id "java-gradle-plugin"
  id "java-library"
  id "maven-publish"
  id "com.github.ben-manes.versions" version "0.43.0"
}

group "com.mx.coppuccino"
version "3.1.3" // x-release-please-version
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
  gradlePluginPortal()
  mavenLocal()
}

dependencies {
  // Need to keep at 4.7.0. 4.8.0 is not compatible with Java 8.
  implementation "ru.vyarus:gradle-quality-plugin:4.7.0"
  implementation "com.github.spotbugs.snom:spotbugs-gradle-plugin:5.0.13"
  // Need to keep at 6.6.0 until issues with M1 Macs is addressed.
  implementation("com.diffplug.spotless:spotless-plugin-gradle:6.6.0") {
    exclude group: "com.google.googlejavaformat", module: "google-java-format-parent"
  }
  implementation "com.google.googlejavaformat:google-java-format-parent:1.15.0"
  implementation "io.gitlab.arturbosch.detekt:detekt-gradle-plugin:1.22.0-RC2"
  implementation "org.kordamp.gradle:jacoco-gradle-plugin:0.47.0"
}

project.description     = "Java style, standard, and safety enforcement"
project.group           = "com.mx.coppuccino"
project.version         = rootProject.version

project.ext.name        = "coppuccino"
project.ext.pluginId    = "com.mx.coppuccino"
project.ext.url         = "https://github.com/mxenabled/Coppuccino"

gradlePlugin {
  plugins {
    coppuccinoPlugin {
      id = project.pluginId
      implementationClass = "com.mx.coppuccino.CoppuccinoPlugin"
    }
    coppuccinoJitPackPlugin {
      id = "com.github.mxenabled.coppuccino"
      implementationClass = "com.mx.coppuccino.CoppuccinoPlugin"
    }
  }
}
